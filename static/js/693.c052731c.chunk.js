"use strict";(self.webpackChunkn0w0n_blog=self.webpackChunkn0w0n_blog||[]).push([[693],{5449:(e,t,r)=>{r.d(t,{o:()=>v});var n=r(9379),a=r(3986),s=(r(6470),r(6617),r(4319)),l=r(9950),o=r(486),i=r(152),c=r(6315),u=r(7624),d=r(1034),h=r(8992),m=r(4414);const f=["node"],p=["node"],g=["node"],x=["node"],v=e=>{let{className:t,children:r}=e;return(0,l.useEffect)((()=>(s.lX.bind("[data-viewer]"),()=>{s.lX.destroy()})),[]),(0,m.jsx)(o.o,{className:"prose text-md lg:prose-base max-w-[100%] break-words ".concat(null!==t&&void 0!==t?t:""),children:r,components:{a:e=>{let{node:t}=e,r=(0,a.A)(e,f);return(0,m.jsx)("a",(0,n.A)((0,n.A)({href:r.href,target:"_blank",rel:"noreferrer"},r),{},{children:r.children}))},img:e=>{let{node:t}=e,r=(0,a.A)(e,p);return(0,m.jsx)("a",{href:r.src,"data-viewer":!0,"data-caption":r.alt,children:(0,m.jsxs)("div",{className:"flex flex-col items-center",children:[(0,m.jsx)("img",(0,n.A)((0,n.A)({className:"rounded-lg"},r),{},{alt:r.alt})),(0,m.jsx)("span",{className:"-mt-8 text-sm",children:r.alt})]})})},pre:e=>{let{node:t}=e,r=(0,a.A)(e,g);return(0,m.jsx)("pre",(0,n.A)({className:"bg-transparent p-2"},r))},code:e=>{let{className:t,children:r,node:n}=e;const a=/language-(\w+)/.exec(null!==t&&void 0!==t?t:""),s=null!==a?a[1]:"",l=String(r);return a?(0,m.jsx)(h.C,{language:s,fileName:"snippet_".concat(Date.now(),".txt"),children:l}):(0,m.jsx)("code",{className:"text-gray-700 font-mono overflow-scroll bg-gray-200 px-2 py-0.5 rounded-sm",children:l.replace(/\n$/,"")})},table:e=>{let{node:t}=e,r=(0,a.A)(e,x);return(0,m.jsx)("table",(0,n.A)({className:"overflow-x-auto block whitespace-nowrap"},r))}},urlTransform:e=>e,rehypePlugins:[i.A,c.A],remarkPlugins:[u.A,d.A]})}},2105:(e,t,r)=>{r.d(t,{D:()=>a});var n=r(9699);const a=e=>{const t=new Date(e);return(0,n.A)(t,"yyyy-MM-dd HH:mm:ss")}},5693:(e,t,r)=>{r.r(t),r.d(t,{default:()=>M});var n=r(2631),a=r(4090),s=r.n(a),l=r(9379),o=function(){var e;try{if("undefined"===typeof localStorage)return!1;const e="nuqs-localStorage-test";localStorage.setItem(e,e);const t=localStorage.getItem(e)===e;if(localStorage.removeItem(e),!t)return!1}catch(t){return console.error("[nuqs]: debug mode is disabled (localStorage unavailable).",t),!1}return(null!==(e=localStorage.getItem("debug"))&&void 0!==e?e:"").includes("nuqs")}();function i(e){if(!o)return;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];const a=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.replace(/%[sfdO]/g,(e=>{const t=r.shift();return"%O"===e&&t?JSON.stringify(t).replace(/"([^"]+)":/g,"$1:"):String(t)}))}(e,...r);performance.mark(a),console.log(e,...r)}var c=r(5154);function u(e,t,r){try{return e(t)}catch(n){return function(e){if(o){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];console.warn(e,...r)}}("[nuqs] Error while parsing value `%s`: %O"+(r?" (for key `%s`)":""),t,n,r),null}}var d=function(){if("undefined"===typeof window)return 50;if(!Boolean(window.GestureEvent))return 50;try{var e;const t=null===(e=navigator.userAgent)||void 0===e?void 0:e.match(/version\/([\d\.]+) safari/i);return parseFloat(t[1])>=17?120:320}catch(t){return 320}}(),h=new Map,m={history:"replace",scroll:!1,shallow:!0,throttleMs:d},f=new Set,p=0,g=null;function x(){return new URLSearchParams(location.search)}function v(e){let{getSearchParamsSnapshot:t=x,updateUrl:r,rateLimitFactor:n=1}=e;return null===g&&(g=new Promise(((e,a)=>{if(!Number.isFinite(m.throttleMs))return i("[nuqs queue] Skipping flush due to throttleMs=Infinity"),e(t()),void setTimeout((()=>{g=null}),0);function s(){p=performance.now();const[n,s]=function(e){let{updateUrl:t,getSearchParamsSnapshot:r}=e;const n=r();if(0===h.size)return[n,null];const a=Array.from(h.entries()),s=(0,l.A)({},m),o=Array.from(f);h.clear(),f.clear(),m.history="replace",m.scroll=!1,m.shallow=!0,m.throttleMs=d,i("[nuqs queue] Flushing queue %O with options %O",a,s);for(const[l,i]of a)null===i?n.delete(l):n.set(l,i);try{return function(e,t){const r=n=>{if(n===e.length)return t();const a=e[n];if(!a)throw new Error("Invalid transition function");a((()=>r(n+1)))};r(0)}(o,(()=>{t(n,{history:s.history,scroll:s.scroll,shallow:s.shallow})})),[n,null]}catch(u){return console.error((0,c.z3)(429),a.map((e=>{let[t]=e;return t})).join(),u),[n,u]}}({updateUrl:r,getSearchParamsSnapshot:t});null===s?e(n):a(n),g=null}setTimeout((function(){const e=performance.now()-p,t=m.throttleMs,r=n*Math.max(0,Math.min(t,t-e));i("[nuqs queue] Scheduling flush in %f ms. Throttled at %f ms",r,t),0===r?s():setTimeout(s,r)}),0)}))),g}var y=r(9950),w=r(8676);function b(e){function t(t){if("undefined"===typeof t)return null;let r="";if(Array.isArray(t)){if(void 0===t[0])return null;r=t[0]}return"string"===typeof t&&(r=t),u(e.parse,r)}return(0,l.A)((0,l.A)({eq:(e,t)=>e===t},e),{},{parseServerSide:t,withDefault(e){return(0,l.A)((0,l.A)({},this),{},{defaultValue:e,parseServerSide(r){var n;return null!==(n=t(r))&&void 0!==n?n:e}})},withOptions(e){return(0,l.A)((0,l.A)({},this),e)}})}b({parse:e=>e,serialize:e=>"".concat(e)}),b({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:t},serialize:e=>Math.round(e).toFixed()}),b({parse:e=>{const t=parseInt(e,16);return Number.isNaN(t)?null:t},serialize:e=>{const t=Math.round(e).toString(16);return t.padStart(t.length+t.length%2,"0")}}),b({parse:e=>{const t=parseFloat(e);return Number.isNaN(t)?null:t},serialize:e=>e.toString()}),b({parse:e=>"true"===e,serialize:e=>e?"true":"false"}),b({parse:e=>{const t=parseInt(e);return Number.isNaN(t)?null:new Date(t)},serialize:e=>e.valueOf().toString()}),b({parse:e=>{const t=new Date(e);return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString()}),b({parse:e=>{const t=new Date(e.slice(0,10));return Number.isNaN(t.valueOf())?null:t},serialize:e=>e.toISOString().slice(0,10)});var N=(0,w.A)();function j(e){var t,r,n;let{history:a="replace",shallow:s=!0,scroll:l=!1,throttleMs:o=d,parse:p=e=>e,serialize:g=String,eq:x=(e,t)=>e===t,defaultValue:w,clearOnDefault:b=!0,startTransition:j}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{history:"replace",scroll:!1,shallow:!0,throttleMs:d,parse:e=>e,serialize:String,eq:(e,t)=>e===t,clearOnDefault:!0,defaultValue:void 0};const S=(0,c.V7)(),A=S.searchParams,O=(0,y.useRef)(null!==(t=null===A||void 0===A?void 0:A.get(e))&&void 0!==t?t:null),[P,I]=(0,y.useState)((()=>{var t;const r=function(e){return h.get(e)}(e),n=void 0===r?null!==(t=null===A||void 0===A?void 0:A.get(e))&&void 0!==t?t:null:r;return null===n?null:u(p,n,e)})),M=(0,y.useRef)(P);i("[nuqs `%s`] render - state: %O, iSP: %s",e,P,null!==(r=null===A||void 0===A?void 0:A.get(e))&&void 0!==r?r:null),(0,y.useEffect)((()=>{var t;const r=null!==(t=null===A||void 0===A?void 0:A.get(e))&&void 0!==t?t:null;if(r===O.current)return;const n=null===r?null:u(p,r,e);i("[nuqs `%s`] syncFromUseSearchParams %O",e,n),M.current=n,O.current=r,I(n)}),[null===A||void 0===A?void 0:A.get(e),e]),(0,y.useEffect)((()=>{function t(t){let{state:r,query:n}=t;i("[nuqs `%s`] updateInternalState %O",e,r),M.current=r,O.current=n,I(r)}return i("[nuqs `%s`] subscribing to sync",e),N.on(e,t),()=>{i("[nuqs `%s`] unsubscribing from sync",e),N.off(e,t)}}),[e]);const q=(0,y.useCallback)((function(t){var r,n,c,u,p,y,A,O;let P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},I=function(e){return"function"===typeof e}(t)?t(null!==(r=null!==(n=M.current)&&void 0!==n?n:w)&&void 0!==r?r:null):t;(null!==(c=P.clearOnDefault)&&void 0!==c?c:b)&&null!==I&&void 0!==w&&x(I,w)&&(I=null);const q=function(e,t,r,n){var a;const s=null===t?null:r(t);return i("[nuqs queue] Enqueueing %s=%s %O",e,s,n),h.set(e,s),"push"===n.history&&(m.history="push"),n.scroll&&(m.scroll=!0),!1===n.shallow&&(m.shallow=!1),n.startTransition&&f.add(n.startTransition),m.throttleMs=Math.max(null!==(a=n.throttleMs)&&void 0!==a?a:d,Number.isFinite(m.throttleMs)?m.throttleMs:0),s}(e,I,g,{history:null!==(u=P.history)&&void 0!==u?u:a,shallow:null!==(p=P.shallow)&&void 0!==p?p:s,scroll:null!==(y=P.scroll)&&void 0!==y?y:l,throttleMs:null!==(A=P.throttleMs)&&void 0!==A?A:o,startTransition:null!==(O=P.startTransition)&&void 0!==O?O:j});return N.emit(e,{state:I,query:q}),v(S)}),[e,a,s,l,o,j,S.updateUrl,S.getSearchParamsSnapshot,S.rateLimitFactor]);return[null!==(n=null!==P&&void 0!==P?P:w)&&void 0!==n?n:null,q]}var S=r(2074),A=r(5449),O=r(3693),P=r(2105),I=r(4414);const M=()=>{const{avatar:e,name:t,description:r,links:a}=O.e.author_settings,l=[{title:"MMAP on Allwinner H3  - The faster way to access to GPIO pins",created_at:168455928e4,updated_at:1737386721335,slug:"allwinner_h3_memory_mapping",summary:"\nWhen it comes to control the GPIO pins on a development board, many of developers have tried to access the GPIO pins from the user space (e.g. The `sysfs`). But this approach may not perform well because it's not that fast as you may thought - at least it was vividly reflected in one of my recent needs.\n\nRecently I took over a maker-level project that uses the Raspberry Pi and in the project, the Pi needs to continuously poll the level of a certain output from the FPGA at high speed to determine whether the data is \"ready\". However, as the price of Raspberry Pi rises, I had to consider the affordable alternative, finally I settled on the Orange Pi One, which uses the Allwinner H3 and has a 512 MB of RAM - That's enough for my needs.\n\nIn the original Raspberry Pi implementation for the project, the state of the GPIO pins was obtained directly by accessing the GPIO registers - the memory mapping (mmap), and we know that different SOCs have different internal register sets and addresses, so to port the project to the Allwinner H3, some significant changes in the code were required.\n\nThis article will introduce how I understand the concept of mmap, and how did I analyse the datasheet provided by Allwinner, in the last, I'll provide a complete example of how to use mmap to access GPIO pins in C, Go, and Python.\n\n![Orange Pi One](https://assets.n0w0n.com/allwinner_h3_memory_mapping/1.jpg)\n\n",words:22818}],[o,i]=j("page",{parse:e=>parseInt(e),serialize:e=>e.toString(),defaultValue:1}),c=Math.ceil(l.length/5),u=l.slice(5*(o-1),5*o),d=e=>{e>=1&&e<=c&&i(e)};return(0,I.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,I.jsx)("img",{src:e,className:"w-32 rounded-full shadow-xl border-4 border-gray-300 hover:rotate-[360deg] transition-all duration-1000",alt:""}),(0,I.jsx)("h2",{className:"mt-6 text-2xl font-semibold text-gray-800",children:t}),(0,I.jsx)("p",{className:"my-2 text-md text-gray-600",children:r}),(0,I.jsx)("div",{className:"my-2 flex flex-row space-x-4",children:a.map(((e,t)=>{let{link:r,icon:n,name:a}=e;return(0,I.jsx)("a",{href:r,target:"_blank",rel:"noreferrer",children:(0,I.jsx)(s(),{path:n,size:1,className:"text-gray-500 hover:text-amber-600 transition-all"})},"".concat(t,"-").concat(a))}))}),(0,I.jsx)("ul",{className:"flex flex-col animate-fade-up max-w-[calc(80%)] md:max-w-[calc(70%)] lg:max-w-[calc(50%)] my-8 mx-12 lg:mx-0",children:u.length?u.map(((e,t)=>{let{summary:r,title:a,slug:l,created_at:o,updated_at:i,words:c}=e;return(0,I.jsxs)("li",{className:"my-8 space-y-4",children:[(0,I.jsxs)("div",{className:"flex flex-row items-center text-2xl space-x-3 font-extrabold",children:[(0,I.jsx)(s(),{path:n.vZx,className:"text-gray-500 size-8"}),(0,I.jsx)(S.N_,{to:"/post/".concat(l),className:"text-gray-800 hover:text-amber-600 duration-300 transition-all",children:a})]}),(0,I.jsxs)("div",{className:"text-sm text-gray-400 flex flex-col sm:flex-row",children:[(0,I.jsxs)("div",{className:"flex flex-row items-center space-x-1 sm:mr-2",children:[(0,I.jsx)(s(),{path:n.HL7,size:.7,className:""}),(0,I.jsx)("span",{children:(0,P.D)(o)})]}),o!==i&&(0,I.jsxs)("div",{className:"flex flex-row items-center space-x-1 sm:mr-2",children:[(0,I.jsx)(s(),{path:n.rch,size:.7,className:""}),(0,I.jsx)("span",{children:(0,P.D)(i)})]}),(0,I.jsxs)("div",{className:"flex flex-row items-center space-x-1",children:[(0,I.jsx)(s(),{path:n.OKe,size:.7,className:""}),(0,I.jsxs)("span",{children:[c.toLocaleString()," words"]})]})]}),(0,I.jsx)(A.o,{className:"mt-4 pb-4",children:r}),(0,I.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,I.jsx)(S.N_,{to:"/post/".concat(l),className:"text-center duration-300 transition-all border border-gray-300 hover:bg-gray-100 px-4 py-2 rounded-md text-gray-600 hover:text-amber-600",children:"Read more..."}),(0,I.jsx)("hr",{className:"w-full border-gray-300"})]})]},"".concat(t,"-").concat(l))})):(0,I.jsx)("span",{className:"text-center text-gray-600",children:"No posts yet..."})}),l.length>0&&(0,I.jsxs)("div",{className:"flex items-center space-x-4 my-4",children:[(0,I.jsx)("button",{disabled:1===o,onClick:()=>d(o-1),className:"px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-100 text-gray-600 hover:text-amber-600 disabled:opacity-50 transition-all",children:"Previous"}),(0,I.jsxs)("span",{className:"text-gray-600",children:["Page ",o,"/",c]}),(0,I.jsx)("button",{disabled:o===c,onClick:()=>d(o+1),className:"px-4 py-2 rounded-md border border-gray-300 hover:bg-gray-100 text-gray-600 hover:text-amber-600 disabled:opacity-50 transition-all",children:"Next"})]})]})}}}]);